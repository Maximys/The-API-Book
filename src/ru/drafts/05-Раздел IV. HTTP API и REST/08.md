### Заключительные положения и общие рекомендации

Подведём итог описанному в предыдущих главах. Чтобы разработать качественное HTTP API, необходимо:
  1. Описать happy path, т.е. составить диаграмму вызовов для стандартного цикла работы клиентского приложения;
  2. Понять, какие ошибки возможны на этом пути и каким образом клиент должен восстанавливаться из какого состояния;
  3. Определиться с номенклатурой ресурсов и операций над ними;
  4. Решить, какая функциональность будет передана на уровень протокола HTTP [какие стандартные возможности протокола будут использованы] и в каком объёме, и разработать конкретную спецификацию.
  5. Детализировать пп. 1-3, т.е. записать все запросы и ответы согласно разработанной спецификации, и оценить, насколько удобным, понятным и читабельным оказалось результирующее API.

Позволим себе так же дать несколько советов по code style [которые в самоучителях принято выдавать за best practice разработки HTTP API]:

  1. Не различайте пути с `/` на конце и без него и примите какую-то рекомендацию по умолчанию (мы рекомендуем все пути заканчивать на `/` — по простой причине, это позволяет разумно описать обращение к корню домена как `GET /`).

  2. Не пренебрегайте стандартными заголовками — `Date`, `Content-Type`, `Content-Encoding`, `Content-Length`, `Cache-Control`, `Retry-After` — и вообще старайтесь не полагать на то, что клиент правильно догадывается о параметрах по умолчанию.

  3. Поддержите метод `OPTIONS` на случай, если ваш API захотят использовать из браузеров.

  4. Определитесь с правилами выбора кейсинга параметров (и преобразований кейсинга при перемещении параметра между различными частями запроса) и придерживайтесь их.

  5. Для всех `GET`-запросов указывайте политику кэширования (иначе всегда есть шанс, что клиент придумает её за вас).

В заключение хотелось бы сказать следующее: HTTP API — это способ организовать ваше API так, чтобы полагаться на понимание семантики операций как разнообразным программным обеспечением, от клиентских фреймворков до серверных гейтвеев, так и разработчиком, который читает спецификацию. В этом смысле HTTP предоставляет пожалуй что наиболее широкий (и в плане глубины, и в плане распространённости) по сравнению с другими технологиями словарь для описания самых разнообразных ситуаций, возникающих во время работы клиент-серверных приложений. Разумеется, эта технология не лишена своих недостатков, но для разработчика публичного API она является выбором по умолчанию — на сегодняшний день скорее надо обосновывать отказ от HTTP API чем выбор в его пользу. Для непубличных API (особенно при наличии самописных инструментов кодогенерации) этот выбор не столь очевиден, но и здесь HTTP API обладает рядом преимуществ — большое количество готовых инструментов и широкое распространение знаний о технологии (пусти и фрагментарных) среди разработчиков.